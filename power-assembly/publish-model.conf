subsystem = NFIRAOS
component = power

publish {
  events = [
    
    {
      name            = state
      description     = power assembly state
      attributes      = [
        {
          name        = cmd
          description = Power assembly command state
          enum        = [ UNINITIALIZED, READY, BUSY ]
        }
        {
          name        = debug
          description = Current debug message level.
          enum        = [ DEBUG, INFO, WARN, ERROR ]
        }
      ]
    }

    {
      name            = cmdStatus
      description     = Recent command status.
      attributes      = [
        {
          name        = cmd
          description = Rrecent command name.
          type        = string
        }
        {
          name        = args
          description = Recent command arguments. Empty string if no argue mend supplied.
          type        = string
        }
        {
          name        = caller
          description = Recent command caller (if available).
          type        = string
        }
        {
          name        = runId
          description = Run ID associated with the recent command.
          type        = integer 
        }
        {
          name        = ack
          description = Recent command acknowledgement status.
          enum        = [ ACCEPTED, REJECTED ]
        }
        {
          name        = ackMsg
          description = Recent command acknowledgement message. Empty string if acknowledgement is ACCEPTED.
          type        = string
        }
        {
          name        = comp
          description = Recent command completion status.
          enum        = [ INPROGRESS, SUCCESS, FAILED, INTERRUPTED, REJECTED ]
        }
        {
          name        = compMsg
          description = Recent command completion message. Empty string if completion is INPROGRESS or SUCCESS.
          type        = string
        }
      ]
    }

    {
      name            = powerBarStateX
      description     = state of Power Bar ID X (during build there will be one of these states published for each of the N bars)
      attributes      = [
        {
         name         = pduId
         description  = Power Distribution Unit to which it is connected
         enum         = [ CLEAN, DIRTY1, DIRTY2, UPS ]
        }
        {
          name        = devices
          description = unique device strings as specified in the configuration file
          type        = array
          dimensions: [8]
          items = {
            type        = string
          }
        }
        {
          name        = outletStates
          description = power states of outlets
          type        = array
          dimensions: [8]
          items = {
            enum = [ ON, OFF, ERROR ]
          }
        }
        {
          name        = outletTypes
          description = """power outlet type
  <ul>
  <li> ACTIVE - turned on by wake command
  <li> INACTIVE - turned off by hibernate command
  <li> HIBERNATE - turned off by hibernate command and turned on by wake command
  <li> MANUAL - not affected by either hibernate or wake commands
  </ul>"""
          type        = array
          dimensions: [8]
          items = {
            enum        = [ ACTIVE, INACTIVE, HIBERNATE, MANUAL ]
          }
        }
        {
          name        = currents
          description = current monitor for each outlet
          type        = array
          dimensions: [8]
          items = {
            type        = double
            units       = mA
          }
        }
        {
          name        = voltages
          description = voltage monitor for each outlet
          type        = array
          dimensions: [8]
          items = {
            type        = double
            units       = V
          }
        }

      ]
    }

    {
      name            = powerDistUnitClean
      description     = state of the Clean Power distribution unit
      attributes      = [
        {
          name        = pduState
          description = state of the entire unit
          enum = [ ON, OFF, ERROR ]
        }
        {
          name        = current
          description = current monitor for the entire unit
          type        = double
          units       = A
        }
        {
          name        = voltage
          description = voltage monitor for the entire unit
          type        = double
          units       = V
        }
      ]
    }

    {
      name            = powerDistUnitDirty1
      description     = state of Dirty Power 1 distribution unit
      attributes      = [
        {
          name        = pduState
          description = state of the entire unit
          enum = [ ON, OFF, ERROR ]
        }
        {
          name        = current
          description = current monitor for the entire unit
          type        = double
          units       = A
        }
        {
          name        = voltage
          description = voltage monitor for the entire unit
          type        = double
          units       = V
        }
      ]
    }

    {
      name            = powerDistUnitDirty2
      description     = state of Dirty Power 2 distribution unit
      attributes      = [
        {
          name        = pduState
          description = state of the entire unit
          enum = [ ON, OFF, ERROR ]
        }
        {
          name        = current
          description = current monitor for the entire unit
          type        = double
          units       = A
        }
        {
          name        = voltage
          description = voltage monitor for the entire unit
          type        = double
          units       = V
        }
      ]
    }

    {
      name            = powerDistUnitUPS
      description     = state of the UPS Power distribution unit
      attributes      = [
        {
          name        = pduState
          description = state of the entire unit
          enum = [ ON, OFF, ERROR ]
        }
        {
          name        = current
          description = current monitor for the entire unit
          type        = double
          units       = A
        }
        {
          name        = voltage
          description = voltage monitor for the entire unit
          type        = double
          units       = V
        }
      ]
    }

  ]

  #alarms = [
  # ]

}
