subsystem = NFIRAOS
component = power

publish {
  events = [
    {
      name            = state
      description     = power assembly state
      attributes      = [
        {
          name        = cmd
          description = Power assembly command state
          enum        = [ UNINITIALIZED, READY, BUSY ]
        }
      ]
    }

    {
      name            = powerBarStateX
      description     = state of Power Bar ID X (during build there will be one of these states published for each of the N bars)
      attributes      = [
        {
         name         = pduId
         description  = Power Distribution Unit to which it is connected
         enum         = [ CLEAN, DIRTY, UPS ]
        }
        {
          name        = devices
          description = unique device strings as specified in the configuration file
          type        = array
          dimensions: [8]
          items = {
            type        = string
          }
        }
        {
          name        = outletStates
          description = power states of outlets
          type        = array
          dimensions: [8]
          items = {
            enum = [ ON, OFF, ERROR ]
          }
        }
        {
          name        = outletTypes
          description = """power outlet type
  <ul>
  <li> ACTIVE - turned on by wake command
  <li> INACTIVE - turned off by hibernate command
  <li> HIBERNATE - turned off by hibernate command and turned on by wake command
  <li> MANUAL - not affected by either hibernate or wake commands
  </ul>"""
          type        = array
          dimensions: [8]
          items = {
            enum        = [ ACTIVE, INACTIVE, HIBERNATE, MANUAL ]
          }
        }
        {
          name        = currents
          description = current monitor for each outlet
          type        = array
          dimensions: [8]
          items = {
            type        = double
            units       = mA
          }
        }
        {
          name        = voltages
          description = voltage monitor for each outlet
          type        = array
          dimensions: [8]
          items = {
            type        = double
            units       = V
          }
        }

      ]
    }

    {
      name            = powerDistUnitClean
      description     = state of the Clean Power distribution unit
      attributes      = [
        {
          name        = pduState
          description = state of the entire unit
          enum = [ ON, OFF, ERROR ]
        }
        {
          name        = current
          description = current monitor for the entire unit
          type        = double
          units       = A
        }
        {
          name        = voltage
          description = voltage monitor for the entire unit
          type        = double
          units       = V
        }
      ]
    }

    {
      name            = powerDistUnitDirty
      description     = state of the Dirty Power distribution unit
      attributes      = [
        {
          name        = pduState
          description = state of the entire unit
          enum = [ ON, OFF, ERROR ]
        }
        {
          name        = current
          description = current monitor for the entire unit
          type        = double
          units       = A
        }
        {
          name        = voltage
          description = voltage monitor for the entire unit
          type        = double
          units       = V
        }
      ]
    }

    {
      name            = powerDistUnitUPS
      description     = state of the UPS Power distribution unit
      attributes      = [
        {
          name        = pduState
          description = state of the entire unit
          enum = [ ON, OFF, ERROR ]
        }
        {
          name        = current
          description = current monitor for the entire unit
          type        = double
          units       = A
        }
        {
          name        = voltage
          description = voltage monitor for the entire unit
          type        = double
          units       = V
        }
      ]
    }

  ]

  #alarms = [
  #
  # ]

}
