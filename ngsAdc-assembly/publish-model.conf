subsystem = NFIRAOS
component = ngsAdc

publish {
  events = [
    {
      name            = state
      description     = NGS ADC assembly state
      attributes      = [
        {
          name        = cmd
          description = NGS ADC assembly command state
          enum        = [ UNINITIALIZED, READY, BUSY, CONTINUOUS ]
        }
        {
          name        = move
          description = NGS ADC assembly movement state
          enum        = [ UNDATUMED, DATUMING, DATUMED, MOVING ]
        }
        {
          name        = onTarget
          description = Is current LGS trombone position within tolerance of the target position.
          type        = boolean
        }
      ]
    }

    {
      name            = imageShift
      description     = """The expected image shift of the NFIRAOS visible WFS position based on the current power and orientation of the NGS ADC.

If the motors have not been datumed (state.move == UNDATUMED | DATUMING), then the expected image shift is invalid and will be set to zero.

*Discussion: The visible ADC will shift an image position in a manner that depends upon the current state of the ADC. The estimated image shift is sent from the NFIRAOS CC to the TCS so that the TCS can adjust the visible WFS position demands accordingly.*"""
      maxRate         = 20
      archive         = true
      archiveRate     = 1
      attributes = [
        {
          name        = x 
          description = x-direction of image shift
          type        = double
          units       = "mm in FCRS<sub>174.5</sub> at reference wavelength"
        }
        {
          name        = y 
          description = y-direction of image shift
          type        = double
          units       = "mm in FCRS<sub>174.5</sub> at reference wavelength"

        }
      ]
    }
  
    {
      name            = pupilShift
      description     = """The expected PWFS pupil shift based on the current power and orientation of the NGS ADC.

If the motors have not been datumed (state.move == UNDATUMED | DATUMING), then the expected pupil shift is invalid and will be set to zero."""
      maxRate         = 20
      archive         = true
      archiveRate     = 1
      attributes = [
        {
          name        = x 
          description = x-direction of pupil shift
          type        = double
          units       = "fraction of pupil diameter shift in FCRS<sub>174.5</sub>"
        }
        {
          name        = y 
          description = y-direction of pupil shift
          type        = double
          units       = "fraction of pupil diameter shift in FCRS<sub>174.5</sub>"
        }
      ]
    }
  ]

  telemetry = [
    {
      name            = target
      description     = Target position for the NGS ADC.
      attributes      = [
        {
          name        = power
          description = """Target ADC power.

In follow mode (state.cmd == CONTINUOUS) this target is updated based on TCS dispersion parameters. This value is also set by the datum and setAdc commands."""
          type        = double
          units       = TBD
        }
        {
          name        = orientation
          description = """Target ADC orientation.

In follow mode (state.cmd == CONTINUOUS) this target is updated based on TCS dispersion parameters. This value is also set by the  datum and setAdc commands."""
          type        = double
          units       = degrees
        }
        {
          name        = rotationA
          description = """Target position of the NGS ADC rotation A stage."""
          type        = double
          units       = degrees
        }
        {
          name        = rotationB
          description = """Target position of the NGS ADC rotation B stage."""
          type        = double
          units       = degrees
        }
      ]
    }

    {
      name            = current
      description     = """Current position of the NGS ADC.

If the motors have not been datumed (state.move == UNDATUMED | DATUMING), then the positions are invalid and will be set to zero."""
      maxRate         = 20
      attributes      = [
        {
          name        = power
          description = """Current estimated ADC power based on the current positions of the ADC stages (current.rotationA and current.rotationB)."""
          type        = double
          units       = TBD
        }
        {
          name        = orientation
          description = """Current estimated ADC orientation based on the current positions of the ADC stages (current.rotationA and current.rotationB)."""
          type        = double
          units       = degrees
        }
        {
          name        = rotationA
          description = """Current position of the NGS ADC rotation A stage."""
          type        = double
          units       = degrees
        }
        {
          name        = rotationB
          description = """Current position of the NGS ADC rotation B stage."""
          type        = double
          units       = degrees
        }
      ]
    }

  ] 
  
}
