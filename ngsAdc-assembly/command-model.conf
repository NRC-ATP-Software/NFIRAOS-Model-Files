subsystem = NFIRAOS
component = ngsAdc

description = NGS ADC Assembly commands.

receive = [
  
   {
    name            = init
    description     = """
    Request Command.

    Prepares the assembly for operation and reads configuration files. The configuration name must be specified if a configuration version is specified. This command will internally trigger a stop if required.

    If the configuration name is not specified, then a default configuration name and version is used. If the configuration version is not specified, then the default version is used for the specified configuration name.
<html>
  <p>
  Precondition:
  <ul>
  <li> none
  </ul>

  <p>
  Execution:
  <ul>
  <li> state.cmd = busy
  <li> state.move = unindexed | indexed
  </ul>

  <p>
  At Completion:
  <ul>
  <li> state.cmd = ready
  </ul>
</html>
    """
    args = [
       {
        name        = configuration name 
        description = Name of the configuration file to get from the TMT Configuration Service
        type        = string
      }
      {
        name        = configuration version
        description = Version of the configuration file to get from the TMT Configuration Service
        type        = string 
      }
    ]
  }

   {
    name            = datum
    description     = """
    Submit Command.

    Datum the NGS ADC stages and prepares the assembly for operation. This command will internally trigger a stop if required.

<html>
  <p>
  Precondition:
  <ul>
  <li> state.cmd != uninitialized
  </ul>

  <p>
  Execution:
  <ul>
  <li> state.cmd = busy
  <li> state.move = indexing
  </ul>

  <p>  
  At Completion:
  <ul>
  <li> state.cmd = ready
  <li> state.move = indexed
  </ul>
</html>
    """
  }

  {
    name            = stop
    description     = """
    Request Command.

    Cancel the current submit type command and stop all NGS ADC stages.
<html>
  <p>
  Precondition:
  <ul>
  <li> state.cmd != uninitialized
  </ul>
  
  <p>
  Execution:
  <ul>
  <li> state.cmd = busy
  </ul>

  <p>
  At Completion:
  <ul>
  <li> state.cmd = ready
  <li> state.move = unindexed | indexed
  </ul>
</html>
    """
  }

{
    name            = move
    description     = """
    Submit Command.

    Engineering command to move individual NGS ADC stages to the specified positions.
<html>
  <p>
  Precondition:
  <ul>
  <li> state.cmd != uninitialized
  <li> state.move = indexed | moving
  </ul>
  
  <p>
  Execution:
  <ul>
  <li> state.cmd = busy
  <li> state.move = moving
  </ul>

  <p>
  At Completion:
  <ul>
  <li> state.cmd = ready
  <li> state.move = indexed
  </ul>
</html>
    """
    args = [
      {
        name        = rotationA
        description = target NGS ADC rotation A stage position.
        type        = double
        units       = degrees
      }
      {
        name        = totationB
        description = target NGS ADC rotation B stage position.
        type        = double
        units       = degrees
      }
    ]
  }

  {
    name            = setAdc
    description     = """
    Submit Command.

    Position the NGS ADC based on specified power and orientation.
<html>
  <p>
  Precondition:
  <ul>
  <li> state.cmd != uninitialized
  <li> state.move = indexed | moving
  </ul>
  
  <p>
  Execution:
  <ul>
  <li> state.cmd = busy
  <li> state.move = moving
  </ul>

  <p>
  At Completion:
  <ul>
  <li> state.cmd = ready
  <li> state.move = indexed
  </ul>
</html>
  """
    args = [
      {
        name        = power
        description = target ADC power
        type        = double
        units       = TBD
      }
      {
        name        = orientation
        description = target ADC orientation
        type        = double
        units       = degrees
      }
    ]
  }

  {
    name            = follow
    description     = """
    Request Command.

    Enable the NGS ADC follow mode. When the follow mode is enabled, the NGS ADC will track the dispersion parameters from the TCS.
<html>
  <p>
  Precondition:                             
  <ul>
  <li> state.cmd != uninitialized
  <li> state.move = indexed | moving
  </ul>
  
  <p>
  Execution:
  <ul>
  <li> none
  </ul>

  <p>
  At Completion:
  <ul>
  <li> state.cmd = continuous
  <li> state.move = indexed | moving
  </ul>
</html>
  """
  }

]

