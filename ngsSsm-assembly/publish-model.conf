subsystem = NFIRAOS
component = ngsSsm

publish {
  telemetry = [
    {
      name            = state
      description     = NGS SSM assembly state
      attributes      = [
        {
          name        = cmd
          description = NGS SSM assembly command state
          enum        = [ UNINITIALIZED, READY, BUSY, CONTINUOUS ]
        }
        {
          name        = move
          description = NGS SSM assembly movement state
          enum        = [ UNINDEXED, INDEXING, INDEXED, MOVING ]
        }
        {
          name        = dither
          description = telescope dither state assumed by the SSM
          type        = boolean
        }
        {
          name        = nss 
          description = flag indicating if NSS mode is enabled
          type        = boolean
        }
      ]
    }


    {
      name            = nssTarget 
      description     = "target position of an NSS NGS source for following in NSS mode. This position is used instead of the PWFS position stream from the TCS."
      attributes      = [
        {
          name        = x
          description = target NGS SSM x position for NSS NGS source.
          type        = double
          units       = "mm in X-axis of FCRS<sub>174.5</sub> at reference wavelength"
        }
        {
          name        = y
          description = target NGS SSM x position for NSS NGS source.
          type        = double
          units       = "mm in Y-axis of FCRS<sub>174.5</sub> at reference wavelength"
        }
      ]
    }

   {
      name            = position
      description     = net NGS SSM positions
      maxRate         = 20
      attributes      = [
        {
          name        = x
          description = current NGS SSM x position.
          type        = double
          units       = "mm in X-axis of FCRS<sub>174.5</sub> at reference wavelength"
        }
        {
          name        = y
          description = current NGS SSM y position.
          type        = double
          units       = "mm in Y-axis of FCRS<sub>174.5</sub> at reference wavelength"
        }
        {
          name        = focus
          description = current NGS SSM focus position.
          type        = double
          units       = "micrometers of RMS wavefront"
        }
      ]
    }

    {
      name            = engr
      description     = engineering data for NGS SSM assembly
      maxRate         = 20
      attributes      = [
        {
          name        = x
          description = target NGS SSM x-axis stage position.
          type        = double
          units       = "mm in local stage coordinate system"
        }
        {
          name        = y
          description = target NGS SSM y-axis stage position.
          type        = double
          units       = "mm in local stage coordinate system"
        }
        {
          name        = tip
          description = target NGS SSM tip-axis stage position.
          type        = double
          units       = "degrees in local stage coordinate system"
        }
        {
          name        = tilt
          description = target NGS SSM tilt-axis stage position.
          type        = double
          units       = "degrees in local stage coordinate system"
        }
        {
          name        = focus
          description = target NGS SSM focus-axis stage position.
          type        = double
          units       = "mm in local stage coordinate system"
        }
      ]
    }
  ] 
  
  alarms = [
    {
      name = heartbeat
      description = NGS SSM assembly heartbeat alarm
      severity = major
      archive = true
    }
    {
      name = limitX
      description = NGS SSM x-axis stage has reached a limit
      severity = major
      archive = true
    }
    {
      name = limitY
      description = NGS SSM Y-axis stage has reached a limit
      severity = major
      archive = true
    }
    {
      name = limitTip
      description = NGS SSM tip-axis stage has reached a limit
      severity = major
      archive = true
    }
    {
      name = limitTilt
      description = NGS SSM tilt-axis stage has reached a limit
      severity = major
      archive = true
    }
{
      name = limitFocus
      description = NGS SSM focus-axis stage has reached a limit
      severity = major
      archive = true
    }

  ]

}
